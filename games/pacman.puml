@startuml
package "Process Input Handler" {
!includesub ../uml/frontend-software-system/process-input-handler.puml!INTERFACE
}
package "Render Handler" {
!includesub ../uml/frontend-software-system/render-handler.puml!INTERFACE
}
!include ../uml/frontend-software-system/game-settings.puml
package "Update Handler" {
!includesub ../uml/frontend-software-system/update-handler.puml!INTERFACE
}

package Pac-Man {

class Position {
 - x : int
 - y : int
}

class Wall {
 - sprite : Sprite
 - position: Position
}

class PowerSphere
{
 - sprite : Sprite
 - time : int
 + activatePower() : void
}

class Sphere
{
 - sprite : Sprite
}

abstract class AGhost
{
 - sprite : Sprite
 - isChasing : bool
 + fleePacman () : void {abstract}
 + chasePacman () : void {abstract}
 + move(direction : Direction) : bool

}

class ClydeGhost{}
class PinkyGhost{}
class InkyGhost{}
class BlinkyGhost{}

interface ICharacter
{
 - position: Position
 - direction : Direction
 + respawn (Position position) : void
 + move (Position) : bool
}
class Pacman 
{
 - sprite : Sprite
 - lives : int
 + hit() : bool
 + isAlive(): bool
 + move(direction : Direction) : bool

}

class Maze
{
 - blocks : Block[][]
 + generateMaze() : void
}

class GameController
{
 -maze : Maze
 - pacman : Pacman
 -ghosts : List<AGhost>
 -score : int
 + checkCollisions() : void
 + handleInput() : void
 + updateScore() : void
 + restart(): void
}




GameController ..> SoundFactory
GameController ..> SpriteFactory

interface ISphere
{
 - postion : Position
 + collect() : void
}


abstract class ACollisionHandler {
    + handleCollision() : void {abstract}
    + update() : void {abstract}
}

ACollisionHandler <|-- PacmanGhostCollisionHandler
ACollisionHandler <|-- PacmanWallCollisionHandler
ACollisionHandler <|-- PacmanSphereCollisionHandler
ACollisionHandler <|-- PacmanPowerSphereCollisionHandler
ACollisionHandler <|-- GhostWallCollisionHandler

ACollisionHandler ..> UpdatePublisher



class Direction {
 - dx : int
 - dy : int
 + Direction(dx : int, dy : int)
 + up() : Direction
 + down() : Direction
 + left() : Direction
 + right() : Direction
}


interface IMovable {
 + move(direction : Direction) : bool
}


class Block{
 - position : Position
}

GameController ..> ProcessInputPublisher: uses
GameController ..|> IProcessInputSubscriber : implements
GameController --> Pacman
GameController --> AGhost
GameController --> Maze


ClydeGhost --|> AGhost
PinkyGhost --|> AGhost
InkyGhost --|> AGhost
BlinkyGhost --|> AGhost




Maze --> Block

GameController --|> AGameSettings : extends

PowerSphere ..|> ISphere
Sphere ..|> ISphere

ISphere --> Position : have
ICharacter --> Position : have
Wall --> Position : have


Pacman ..|> ICharacter
AGhost ..|> ICharacter
ICharacter ..|> IMovable
IMovable --- Direction

ICharacter --> Direction


Wall --|> Block
Pacman --|> Block
AGhost --|> Block
PowerSphere --|> Block
Sphere --|> Block

AGhost ..|> ACollisionHandler
Wall ..|> ACollisionHandler
Sphere ..|> ACollisionHandler
PowerSphere ..|> ACollisionHandler

}@enduml
