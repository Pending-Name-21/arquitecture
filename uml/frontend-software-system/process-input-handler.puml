@startuml
package "Process Input Handler" {
!startsub INTERFACE
    interface IKeyboardInputSubscriber {
        +doNotify(event: KeyboardEvent) : void
    }

    interface IMouseInputSubscriber {
        +doNotify(event: MouseEvent) : void
    }

    class KeyboardEvent {
        state: String
        name: String
    }

    class MouseEvent {
        state: String
        position: MousePosition
    }
!endsub

    interface IPublisher {
        +publish(): void
    }
    IPublisher <|.. MouseInputPublisher
    IPublisher <|.. KeyboardInputPublisher

    class MouseInputPublisher  {
        -concurrentQueue: MouseEvent[]
        -subscribers: IMouseInputSubscriber[]
        +subscribe(subscriber: IMouseInputSubscriber): void
        +feed(events: MouseEvent[]): void
    }
    MouseInputPublisher "1" *-- "many" MouseEvent
    MouseInputPublisher "1" *-- "many" IMouseInputSubscriber

    class KeyboardInputPublisher {
        -concurrentQueue: KeyboardEvent[]
        -subscribers: IKeyboardInputSubscriber[]
        +subscribe(subscriber: IKeyboardInputSubscriber): void
        +feed(events: KeyboardEvent[]): void
    }
    KeyboardInputPublisher "1" *-- "many" KeyboardEvent
    KeyboardInputPublisher "1" *-- "many" IKeyboardInputSubscriber

  class InputVerifier {
    -processInputPublisher : ProcessInputPublisher
    -publishers: IPublisher[]
    +check() : void
  }
  InputVerifier ..> IPublisher: <<uses>>
}
@enduml

